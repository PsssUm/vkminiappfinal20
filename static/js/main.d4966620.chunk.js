(this.webpackJsonpfinal=this.webpackJsonpfinal||[]).push([[0],{135:function(e,t,s){},137:function(e,t,s){"use strict";s.r(t);var c=s(0),i=s.n(c),r=s(18),a=s.n(r),n=s(7),o=s.n(n),l=s(28),j=s(9),h=s(10),d=s(12),b=s(11),p=s(5),u=(s(134),s(135),s.p+"static/media/link_icon.eb89ac93.svg"),m=s.p+"static/media/text_icon.34274a94.svg",O=s(2),x=function(e){Object(d.a)(s,e);var t=Object(b.a)(s);function s(e){var c;return Object(j.a)(this,s),(c=t.call(this,e)).linkify=function(e){var t,s,c;return t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,s=/(^|[^\/])(www\.[\S]+(\b|$))/gim,c=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,e.replace(t,'<a href="$1" target="_blank">$1</a>').replace(s,'$1<a href="http://$2" target="_blank">$2</a>').replace(c,'<a href="mailto:$1">$1</a>')},c}return Object(h.a)(s,[{key:"render",value:function(){var e=this.linkify(this.props.history_item.value),t=e.includes("</a>");return Object(O.jsxs)("div",{className:"history_item",children:[Object(O.jsx)("img",{src:t?u:m}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"history_item_title",children:t?"\u0421\u0441\u044b\u043b\u043a\u0430":"\u0422\u0435\u043a\u0441\u0442"}),t?Object(O.jsx)("p",{className:"history_max_w",dangerouslySetInnerHTML:{__html:e}}):Object(O.jsx)("p",{className:"history_item_text history_max_w",children:this.props.history_item.value})]})]})}}]),s}(i.a.Component),v=s.p+"static/media/empty_history.ac23b3ce.svg",y=function(e){Object(d.a)(s,e);var t=Object(b.a)(s);function s(){var e;return Object(j.a)(this,s),(e=t.call(this)).onBridgeResult=function(t){switch(t.detail.type){case"VKWebAppOpenCodeReaderResult":var s={key:e.state.history.length+"",value:t.detail.data.code_data},c=e.state.history;c.push(s),e.setState({history:c}),o.a.send("VKWebAppStorageSet",s);break;default:break;case"VKWebAppStorageGetKeysResult":o.a.send("VKWebAppStorageGet",{keys:t.detail.data.keys});break;case"VKWebAppStorageGetResult":var i=t.detail.data.keys;i.length>0&&e.setState({history:i})}},e.openScanner=function(){o.a.send("VKWebAppOpenCodeReader")},e.state={qrResult:void 0,history:[]},e}return Object(h.a)(s,[{key:"componentDidMount",value:function(){o.a.subscribe(this.onBridgeResult),o.a.send("VKWebAppStorageGetKeys",{count:100,offset:0})}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"qrcodes_container",children:[Object(O.jsx)(p.f,{separator:!1,children:"QR-\u043a\u043e\u0434\u044b"}),Object(O.jsx)("div",{className:"qr_button",children:Object(O.jsx)(p.c,{onClick:this.openScanner,size:"l",stretched:!0,style:{marginTop:16,marginBottom:28},children:"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR-\u043a\u043e\u0434"})}),Object(O.jsx)(p.g,{}),this.state.history.length>0?Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{className:"qr_count",children:["\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e: ",this.state.history.length]}),this.state.history.reverse().map((function(e,t){return Object(O.jsx)(x,{index:t,history_item:e},t)}))]}):Object(O.jsxs)("div",{className:"empty_qr_cods",children:[Object(O.jsx)("img",{className:"empty_qr_cods_icon center_horizontal",src:v}),Object(O.jsx)("p",{className:"empty_qr_cods_text center_horizontal",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f QR-\u043a\u043e\u0434\u043e\u0432"})]})]})}}]),s}(i.a.Component),_=s.p+"static/media/qr_code_active.96c76ad6.svg",k=s.p+"static/media/qr_code.16cfae85.svg",f=s.p+"static/media/history_active.e8e479f5.svg",g=s.p+"static/media/history.f8a4b063.svg",S=function(e){Object(d.a)(s,e);var t=Object(b.a)(s);function s(e){var c;return Object(j.a)(this,s),(c=t.call(this,e)).openStories=function(){o.a.send("VKWebAppShowStoryBox",{background_type:"none",stickers:[c.props.sticker]})},c}return Object(h.a)(s,[{key:"render",value:function(){return Object(O.jsx)("img",{onClick:this.openStories,className:"sticker_item",src:this.props.sticker.sticker.url})}}]),s}(i.a.Component),A=["https://i.ibb.co/CJv3jC1/image.png","https://i.ibb.co/m9VgSM5/04.png","https://i.ibb.co/wJ77hkk/01.png","https://i.ibb.co/0QTGnvv/02.png","https://i.ibb.co/021kcQR/03.png","https://i.ibb.co/HDJ4pGR/05.png"],C=function(e){Object(d.a)(s,e);var t=Object(b.a)(s);function s(){var e;return Object(j.a)(this,s),(e=t.call(this)).createStickers=function(){var t=[];A.forEach((function(s){t.push(e.createSticker(s))})),e.setState({stickers:t})},e.createSticker=function(e){return{sticker_type:"renderable",sticker:{content_type:"image",url:e,clickable_zones:[{action_type:"link",action:{link:"https://vk.com/app7601800",tooltip_text_key:"tooltip_open_default"}}]}}},e.state={stickers:[]},e}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.createStickers()}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)(p.f,{separator:!1,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u0438"}),Object(O.jsx)("p",{className:"stories_title",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0438\u043a\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0432\u0430\u0448\u0443 \u0438\u0441\u0442\u043e\u0440\u0438\u044e"}),Object(O.jsx)("div",{className:"stickers_container",children:this.state.stickers.reverse().map((function(e,t){return Object(O.jsx)(S,{index:t,sticker:e},t)}))})]})}}]),s}(i.a.Component),N=function(e){Object(d.a)(s,e);var t=Object(b.a)(s);function s(){return Object(j.a)(this,s),t.call(this)}return Object(h.a)(s,[{key:"render",value:function(){return Object(O.jsx)(p.a,{children:Object(O.jsx)(p.b,{children:Object(O.jsx)(w,{})})})}}]),s}(i.a.Component),R=N,w=Object(p.p)((function(e){var t=e.viewWidth,s=Object(p.o)(),c=i.a.useState("histories"),r=Object(l.a)(c,2),a=r[0],n=r[1],o=function(e){return n(e.currentTarget.dataset.story)},j=t>=p.n.TABLET,h=s!==p.l;return Object(O.jsx)(p.i,{header:h&&Object(O.jsx)(p.f,{separator:!1}),style:{justifyContent:"center"},children:Object(O.jsx)(p.h,{animate:!j,spaced:j,width:j?"560px":"100%",maxWidth:j?"560px":"100%",children:Object(O.jsxs)(p.d,{activeStory:a,tabbar:!j&&Object(O.jsxs)(p.j,{children:[Object(O.jsxs)(p.k,{onClick:o,selected:"histories"===a,"data-story":"histories",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u0438",children:[" ",Object(O.jsx)("img",{src:"histories"===a?f:g})]}),Object(O.jsx)(p.k,{onClick:o,selected:"scanner"===a,"data-story":"scanner",text:"QR-\u043a\u043e\u0434\u044b",children:Object(O.jsx)("img",{src:"scanner"===a?_:k})})]}),children:[Object(O.jsx)(p.m,{id:"histories",activePanel:"histories",children:Object(O.jsx)(p.e,{id:"histories",children:Object(O.jsx)(C,{})})}),Object(O.jsx)(p.m,{id:"scanner",activePanel:"scanner",children:Object(O.jsx)(p.e,{id:"scanner",children:Object(O.jsx)(y,{})})})]})})})}),{viewWidth:!0});a.a.render(Object(O.jsx)(N,{}),document.getElementById("root")),o.a.send("VKWebAppInit"),a.a.render(Object(O.jsx)(R,{}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.d4966620.chunk.js.map